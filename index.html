<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Builders - Home</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header Section -->
    <div id="header-container"></div>

    <!-- Search Bar Section -->
    <section class="search-section">
        <div class="container">
            <form class="search-form">
                <input type="text" placeholder="Search for projects, notes, or PPTs..." class="search-input">
                <button type="submit" class="search-btn" onclick="performSearch()">Search</button>
            </form>
        </div>
    </section>

    <section class="results-section">
        <div class="container" id="results"></div>
    </section>
    <script>
        async function fetchContent(url) {
    const response = await fetch(url);
    const text = await response.text();
    return (new DOMParser()).parseFromString(text, 'text/html');
}

async function performSearch(event) {
    event.preventDefault();
    
    const query = document.getElementById('search-input').value.toLowerCase();
    const resultsContainer = document.getElementById('results');
    resultsContainer.innerHTML = ''; // Clear previous results
    
    // Define the paths to search
    const pagesToSearch = [
        '/project-reports/civil-project-reports.html',
        '/project-reports/mechanical-project-reports.html',
        '/project-reports/cse-project-reports.html',
        '/project-reports/eee-project-reports.html',
        '/project-reports/ece-project-reports.html',
        '/project-reports/nm-project-reports.html',
        '/mini-project-reports/civil-mini-project-reports.html',
        '/mini-project-reports/mechanical-mini-project-reports.html',
        '/mini-project-reports/cse-mini-project-reports.html',
        '/mini-project-reports/eee-mini-project-reports.html',
        '/mini-project-reports/ece-mini-project-reports.html',
        '/mini-project-reports/nm-mini-project-reports.html',
        '/ppts/civil-ppts.html',
        '/ppts/mechanical-ppts.html',
        '/ppts/cse-ppts.html',
        '/ppts/eee-ppts.html',
        '/ppts/ece-ppts.html',
        '/notes/civil-notes.html',
        '/notes/mechanical-notes.html',
        '/notes/cse-notes.html',
        '/notes/eee-notes.html',
        '/notes/ece-notes.html'
        // Add other paths as needed
    ];
    
    for (const page of pagesToSearch) {
        const doc = await fetchContent(page);
        
        // Search for project items and notes
        const projectItems = doc.querySelectorAll('.project-item');
        const semesterTables = doc.querySelectorAll('.semester-table');
        
        // Search project items
        projectItems.forEach(item => {
            const text = item.textContent.toLowerCase();
            if (text.includes(query)) {
                const result = document.createElement('div');
                result.className = 'search-result-item';
                result.innerHTML = `
                    <h3>${item.querySelector('h3') ? item.querySelector('h3').textContent : 'No title'}</h3>
                    <p>${item.querySelector('p') ? item.querySelector('p').textContent : ''}</p>
                    <a href="${page}#${item.id}" target="_blank">Go to project</a>
                `;
                resultsContainer.appendChild(result);
            }
        });
        
        // Search notes (semester tables)
        semesterTables.forEach(table => {
            const text = table.textContent.toLowerCase();
            if (text.includes(query)) {
                const result = document.createElement('div');
                result.className = 'search-result-item';
                result.innerHTML = `
                    <h3>${table.querySelector('h3') ? table.querySelector('h3').textContent : 'No title'}</h3>
                    <p>${table.querySelector('p') ? table.querySelector('p').textContent : ''}</p>
                    <a href="${page}#${table.id}" target="_blank">Go to notes</a>
                `;
                resultsContainer.appendChild(result);
            }
        });
    }
    
    if (resultsContainer.innerHTML === '') {
        resultsContainer.innerHTML = '<p>No results found.</p>';
    }
}

    </script>

    <!-- Request New Project and Others Section -->
    <section class="request-section">
        <div class="container">
            <h2>Request New Project and Others</h2>
            <p>If you have a new project or other request, please click the button below to fill out the detailed form.</p>
            <a href="request-form.html" class="request-btn">Go to Request Form</a>
        </div>
    </section>

    <!-- Services Section -->
    <section class="services-section">
        <div class="container">
            <h2>Services</h2>
            <div class="services-grid">
                <div class="service-item">
                    <h3><a href="departments.html?service=project-reports">Projects & PPTs</a></h3>
                    <p>All departments end sem and Naan Mudhalvan projects and PPTs.</p>
                </div>
                <div class="service-item">
                    <h3><a href="departments.html?service=mini-project-reports">Mini Project Reports</a></h3>
                    <p>All departments semester mini projects.</p>
                </div>
                <div class="service-item">
                    <h3><a href="departments.html?service=ppts">PPTs</a></h3>
                    <p>All departments PPTs.</p>
                </div>
                <div class="service-item">
                    <h3><a href="departments.html?service=notes">Notes</a></h3>
                    <p>All departments notes.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Departments Section in Index -->
    <section class="departments-section">
        <div class="container">
            <h2>Departments</h2>
            <div class="departments-grid">
                <div class="department-item">
                    <h3><a href="services.html?department=civil">CIVIL</a></h3>
                </div>
                <div class="department-item">
                    <h3><a href="services.html?department=mechanical">MECHANICAL</a></h3>
                </div>
                <div class="department-item">
                    <h3><a href="services.html?department=cse">CSE</a></h3>
                </div>
                <div class="department-item">
                    <h3><a href="services.html?department=eee">EEE</a></h3>
                </div>
                <div class="department-item">
                    <h3><a href="services.html?department=ece">ECE</a></h3>
                </div>
                <div class="department-item">
                    <h3><a href="services.html?department=naan-mudhalvan">NAAN MUDHALVAN</a></h3>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Section -->
    <div id="footer-container"></div>
    <script src="search.js"></script>
</body>
<script src="header-footer.js"></script>
</html>
